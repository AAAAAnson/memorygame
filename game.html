<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Training Game</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
        }
        .container {
            width: 90%;
            max-width: 600px;
            text-align: center;
            background: #fff;
            padding: 20px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
        }
        .game-info, .game-start, .game-play, .game-over {
            display: none;
        }
        .game-info.active, .game-start.active, .game-play.active, .game-over.active {
            display: block;
        }
        .number-display {
            font-size: 2em;
            margin: 20px 0;
        }
        .input-container {
            margin: 20px 0;
        }
        .progress-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .progress-box {
            width: 20px;
            height: 20px;
            border: 1px solid #000;
            margin: 2px;
        }
        .progress-box.correct {
            background-color: green;
        }
        .progress-box.wrong {
            background-color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-info active">
            <h1>Memory Training Game</h1>
            <p>Game Rules:</p>
            <ul>
                <li>The game consists of 20 levels, each with a 5-second time limit.</li>
                <li>Start from 1-digit numbers and progress to 20-digit numbers. Remember the number displayed.</li>
                <li>After the countdown, enter the number you remember.</li>
                <li>Scoring: Level 1 is worth 5 points, Level 2 is worth 10 points, and so on up to Level 20.</li>
                <li>Total score is 1050 points, and a score of 840 or above is excellent.</li>
            </ul>
            <button onclick="startGame()">Start Game</button>
        </div>
        
        <div class="game-start">
            <h2>Level <span id="current-level">1</span></h2>
            <div class="progress-container" id="progress-container"></div>
            <div class="number-display" id="number-display"></div>
            <div id="countdown"></div>
        </div>
        
        <div class="game-play">
            <h2>Enter the number:</h2>
            <div class="input-container">
                <input type="text" id="user-input" />
                <button onclick="submitAnswer()">Submit</button>
            </div>
        </div>
        
        <div class="game-over">
            <h2>Game Over</h2>
            <p id="final-score"></p>
            <button onclick="resetGame()">Play Again</button>
        </div>
    </div>

    <script>
        const levels = 20;
        let currentLevel = 1;
        let currentNumber = "";
        let score = 0;

        function startGame() {
            document.querySelector('.game-info').classList.remove('active');
            document.querySelector('.game-start').classList.add('active');
            generateProgress();
            showLevel();
        }

        function showLevel() {
            document.getElementById('current-level').innerText = currentLevel;
            currentNumber = generateNumber(currentLevel);
            document.getElementById('number-display').innerText = currentNumber;
            countdown(5, () => {
                document.querySelector('.game-start').classList.remove('active');
                document.querySelector('.game-play').classList.add('active');
            });
        }

        function countdown(seconds, callback) {
            const countdownElement = document.getElementById('countdown');
            countdownElement.innerText = `Time: ${seconds}`;
            let timer = setInterval(() => {
                seconds--;
                countdownElement.innerText = `Time: ${seconds}`;
                if (seconds === 0) {
                    clearInterval(timer);
                    countdownElement.innerText = "";
                    callback();
                }
            }, 1000);
        }

        function generateNumber(level) {
            let number = "";
            for (let i = 0; i < level; i++) {
                number += Math.floor(Math.random() * 10);
            }
            return number;
        }

        function submitAnswer() {
            const userInput = document.getElementById('user-input').value;
            const progressBox = document.querySelector(`#progress-container .progress-box:nth-child(${currentLevel})`);

            if (userInput === currentNumber) {
                progressBox.classList.add('correct');
                score += currentLevel * 5;
            } else {
                progressBox.classList.add('wrong');
            }

            currentLevel++;
            document.getElementById('user-input').value = "";

            if (currentLevel > levels) {
                endGame();
            } else {
                document.querySelector('.game-play').classList.remove('active');
                document.querySelector('.game-start').classList.add('active');
                showLevel();
            }
        }

        function generateProgress() {
            const progressContainer = document.getElementById('progress-container');
            progressContainer.innerHTML = "";
            for (let i = 0; i < levels; i++) {
                const progressBox = document.createElement('div');
                progressBox.classList.add('progress-box');
                progressContainer.appendChild(progressBox);
            }
        }

        function endGame() {
            document.querySelector('.game-play').classList.remove('active');
            document.querySelector('.game-over').classList.add('active');

            const resultMessage = score >= 840 ? "Excellent! " : "Good effort! ";
            document.getElementById('final-score').innerText = `${resultMessage} Your final score is: ${score} / 1050.`;
        }

        function resetGame() {
            score = 0;
            currentLevel = 1;
            document.querySelector('.game-over').classList.remove('active');
            document.querySelector('.game-info').classList.add('active');
        }
    </script>
</body>
</html>
